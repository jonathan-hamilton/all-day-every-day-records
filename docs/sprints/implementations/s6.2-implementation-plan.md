# S6.2 Implementation Plan: Discography Page & Navigation

**Story**: S6.2 - Discography Page & Navigation  
**Sprint**: 6  
**Priority**: HIGH  
**Estimate**: 5-7 hours  
**Status**: IN PROGRESS  
**Date**: December 13, 2025

## Story Summary

Create a dedicated Discography page for browsing historical releases, accessible through a dropdown navigation menu under the Releases nav item. The page mirrors the Releases page structure and functionality but filters releases using `category=discography`. Additionally, standardize search placeholder text on homepage and add search functionality to Videos page.

## Acceptance Criteria

1. ✅ Discography link appears as dropdown under Releases nav item (Releases → Releases/Discography)
2. ✅ Discography page displays grid using same layout as Releases page
3. ✅ Fetches releases with `category=discography` parameter
4. ✅ Same search and filtering functionality as Releases page
5. ✅ Releases sorted alphabetically by artist, then title
6. ✅ Responsive on mobile, tablet, desktop breakpoints
7. ✅ Loading, error, and empty states match Releases patterns
8. ✅ Accessible at `/discography` route
9. ✅ ReleaseCard component reused for consistency

**Additional Requirements:**
- ✅ Homepage search placeholder: "Search by title or artist..."
- ✅ Videos page search functionality (matching Releases page pattern)

## Dependencies

### Existing Infrastructure (from Sprint 2, 5, & 6.1)
- ✅ `frontend/src/pages/Releases.tsx` - Template for Discography page
- ✅ `frontend/src/components/ReleaseCard.tsx` - Reusable release display
- ✅ `frontend/src/components/ReleaseFilters.tsx` - Reusable search/filter component
- ✅ `backend/api/get-releases.php` - API with category parameter support (S6.1)
- ✅ `frontend/src/services/releaseService.ts` - Service factory pattern
- ✅ Material-UI Menu component - For dropdown navigation

### New Dependencies
- None - Uses existing technology stack

## Technical Architecture

### Page Structure
```typescript
// Discography.tsx - mirrors Releases.tsx structure
- Same state management (releases, loading, error, filters)
- Same component structure (Container, Filters, Grid, ReleaseCard)
- Different API call: category: 'discography'
- Different page title: "Discography"
```

### Navigation Structure (Updated)
```
Home  Releases▼  Videos  About  Contact
         ├─ Releases
         └─ Discography
```

### API Integration
```typescript
// Discography page API call
const data = await services.releases.getReleases({
  status: 'published' as const,
  sort: 'release_date' as const,
  order: 'desc' as const,
  category: 'discography', // NEW - filters for discography releases
  ...(debouncedSearch && { search: debouncedSearch })
});
```

### Videos Page Search (New Feature)
```typescript
// Videos.tsx - add search state and filtering
const [searchTerm, setSearchTerm] = useState('');
const debouncedSearch = useDebounce(searchTerm, 300);
const filteredVideos = videos.filter(video => 
  video.title.toLowerCase().includes(debouncedSearch.toLowerCase()) ||
  video.artist.toLowerCase().includes(debouncedSearch.toLowerCase())
);
```

## Implementation Increments

### Increment 1: Create Discography Page
**Goal**: Create Discography.tsx page component by duplicating Releases.tsx structure

**Files Created**:
- `frontend/src/pages/Discography.tsx`

**Changes**:
1. Duplicate Releases.tsx structure completely
2. Update page title to "Discography"
3. Update API call to include `category: 'discography'` parameter
4. Update heading text to "Discography"
5. Update empty state message to reference discography
6. Maintain all search, filter, and sorting functionality
7. Keep same responsive grid layout (1/2/3/4 columns)
8. Reuse ReleaseCard and ReleaseFilters components

**Validation**:
- Page compiles without TypeScript errors
- All imports resolve correctly
- Component structure matches Releases page

---

### Increment 2: Add Discography Route
**Goal**: Add route configuration for /discography

**Files Modified**:
- `frontend/src/App.tsx`
- `frontend/src/pages/index.ts`

**Changes**:
1. Add Discography export to pages/index.ts
2. Add `/discography` route in App.tsx
3. Import Discography component
4. Position route logically (after /releases, before /videos)

**Validation**:
- Route accessible at /discography
- Page loads without errors
- Navigation works correctly

---

### Increment 3: Update Navigation with Dropdown
**Goal**: Add dropdown menu under Releases with Releases/Discography options

**Files Modified**:
- `frontend/src/components/Navigation.tsx`

**Changes**:
1. Import Material-UI Menu, MenuItem components
2. Add state for dropdown menu anchor element
3. Convert Releases link to button with dropdown
4. Add Menu component with Releases and Discography MenuItems
5. Handle menu open/close interactions
6. Add proper ARIA labels for accessibility
7. Style dropdown to match navigation theme
8. Ensure mobile drawer includes Discography link

**Validation**:
- Dropdown opens on Releases click
- Both menu items navigate correctly
- Dropdown closes after selection
- Mobile drawer shows both options
- Styling consistent with navigation

---

### Increment 4: Add Videos Page Search
**Goal**: Add search functionality to Videos page matching Releases pattern

**Files Modified**:
- `frontend/src/pages/Videos.tsx`

**Changes**:
1. Import TextField from Material-UI
2. Import useDebounce hook from hooks
3. Add searchTerm state: `useState('')`
4. Add debouncedSearch using useDebounce(searchTerm, 300)
5. Add filteredVideos computed array filtering by title/artist
6. Add search TextField above video grid
7. Style search box to match Releases page
8. Use placeholder: "Search by title or artist..."
9. Filter videos client-side (already loaded from API)

**Validation**:
- Search box appears above video grid
- Typing filters videos in real-time
- Search is case-insensitive
- Debouncing prevents excessive filtering
- Clear button clears search

---

### Increment 5: Update Homepage Search Placeholder
**Goal**: Standardize search placeholder text on homepage

**Files Modified**:
- `frontend/src/pages/Home.tsx`

**Changes**:
1. Locate Autocomplete component in Home.tsx
2. Update placeholder prop to "Search by title or artist..."
3. Ensure consistency with Releases and Videos pages

**Validation**:
- Homepage search shows updated placeholder
- Search functionality remains unchanged
- No visual regressions

## Testing Strategy

### Manual Testing Checklist

**Discography Page**:
- [ ] Page loads at /discography route
- [ ] Displays releases with show_in_discography=true
- [ ] Search filters releases by title/artist
- [ ] Grid responsive across breakpoints (1/2/3/4 columns)
- [ ] Loading state displays during fetch
- [ ] Error state displays on API failure
- [ ] Empty state displays when no releases match
- [ ] ReleaseCard displays correctly
- [ ] Clicking release navigates to detail page

**Navigation Dropdown**:
- [ ] Releases button shows dropdown indicator
- [ ] Clicking Releases opens dropdown menu
- [ ] Menu contains "Releases" and "Discography" items
- [ ] Clicking "Releases" navigates to /releases
- [ ] Clicking "Discography" navigates to /discography
- [ ] Dropdown closes after selection
- [ ] Mobile drawer includes Discography link
- [ ] Dropdown styling matches navigation theme

**Videos Page Search**:
- [ ] Search box appears above video grid
- [ ] Placeholder text: "Search by title or artist..."
- [ ] Typing filters videos by title
- [ ] Typing filters videos by artist
- [ ] Search is case-insensitive
- [ ] Debouncing prevents excessive re-renders
- [ ] Empty state shows when no matches
- [ ] Clear search shows all videos

**Homepage Search**:
- [ ] Placeholder text: "Search by title or artist..."
- [ ] Search functionality unchanged
- [ ] Autocomplete works correctly

## Risk Assessment

**LOW RISK** - This story:
- Reuses proven Releases page structure
- Uses existing API with new parameter from S6.1
- Material-UI Menu component well-documented
- Search pattern already established

Potential Issues:
- Navigation dropdown UX (mitigated by Material-UI Menu component)
- Mobile navigation complexity (mitigated by testing both desktop and mobile)
- Videos page search performance (mitigated by client-side filtering of already-loaded data)

## Success Criteria

S6.2 is complete when:
1. ✅ Discography page accessible at /discography
2. ✅ Dropdown navigation functional for Releases/Discography
3. ✅ Discography page displays correct releases (category=discography)
4. ✅ Search and filtering work on Discography page
5. ✅ Videos page has search functionality
6. ✅ Homepage search placeholder updated
7. ✅ All manual tests pass
8. ✅ No TypeScript compilation errors
9. ✅ No console errors in browser
10. ✅ Responsive design verified across breakpoints

---

**Next Steps After S6.2**:
- S6.3: Admin Discography Management Controls
- Update README.md and sprint documentation
- Run update-commit workflow

## Architectural Directives

### Design Pattern Compliance

**Factory Pattern (Frontend)**:
- ✅ Uses existing `createServices()` for API calls
- ✅ No direct service imports
- ✅ Category parameter passed through service method

**Component Reuse**:
- ✅ ReleaseCard component reused for display
- ✅ ReleaseFilters component reused for search/filter
- ✅ Maintains consistency across Releases and Discography pages

**Material-UI Menu Pattern**:
- ✅ Menu component for dropdown navigation
- ✅ MenuItem for individual options
- ✅ Proper state management for anchor element
- ✅ Accessibility with ARIA labels

**Search Pattern Consistency**:
- ✅ Videos page search matches Releases page pattern
- ✅ Homepage search uses same placeholder text
- ✅ Debounced input for performance
- ✅ Case-insensitive filtering

### State Management Strategy
- **Ephemeral UI State:** Search term, dropdown menu anchor use `useState`
- **No application state needed:** Data fetched through existing service factory
- **Client-side filtering:** Videos search filters already-loaded data

### Security Considerations
- **No new security concerns:** Reuses existing public API endpoints
- **Category parameter:** Already validated in backend (S6.1)
- **Client-side search:** No security implications (public data filtering)
