# S2.5 Implementation Plan: Contact Page Implementation

**Story:** As a user, I want to access contact information, so that I can get in touch with the label

**Sprint:** 2  
**Story ID:** S2.5  
**Dependencies:** None (uses existing navigation from Sprint 1)

## Acceptance Criteria Breakdown

| Criteria | Implementation Approach | Validation Method |
|----------|------------------------|-------------------|
| Contact page accessible via footer link and navigation | Update footer and navigation routing to `/contact` | Test navigation from all pages |
| Page displays relevant contact information | Create contact info section with email addresses and social media links | Verify information display on all breakpoints |
| Contact form allows users to send messages | Implement form with name, email, subject, message fields using Material-UI | Test form field functionality |
| Form validation prevents submission of invalid data | Implement comprehensive client-side validation with error messages | Test all validation scenarios |
| Success confirmation shown after successful form submission | Implement API integration with success/error state management | Test form submission flow |
| Page follows site's responsive design patterns | Use Material-UI breakpoint system for mobile-first responsive design | Test across all device sizes |
| Contact page integrates with existing navigation structure | Update React Router configuration and navigation components | Verify routing integration |

## Technical Approach

### üèóÔ∏è Design Pattern Compliance Validation

#### ‚úÖ Required Patterns Implementation:

**Factory Pattern (API Services) ‚úÖ MANDATORY**
- MUST use `createServices()` for contact form submission API access
- NO direct service imports or instantiation
- New backend endpoint: `/contact-form.php` for form processing

**Component Architecture Pattern ‚úÖ MANDATORY**  
- Contact.tsx component with TypeScript interfaces for props and form data
- Use React.FC type annotation with proper typing
- Material-UI components for consistent design system (Typography, TextField, Button, Box, Grid)

**State Management Pattern ‚úÖ MANDATORY**
- Use `useState` for local form state (formData, errors, isSubmitting, submitStatus)
- No global state required for S2.5 (page-level component state sufficient)
- Form state pattern: `{ name: '', email: '', subject: '', message: '' }`

**API Integration Pattern ‚úÖ MANDATORY**  
- Use factory pattern: `services.api.post('/contact-form.php', formData)`
- Implement loading, success, and error states with type safety
- Handle form submission failures with user-friendly error messages

**Responsive Design Pattern ‚úÖ MANDATORY**
- Mobile-first approach using Material-UI breakpoint system
- Grid layout that stacks on mobile devices (xs), side-by-side on tablet+ (md+)
- Typography that scales appropriately across breakpoints

**Error Handling Pattern ‚úÖ MANDATORY**
- Client-side validation for all form fields with real-time feedback
- API error handling with graceful user notifications
- Form field error states with Material-UI error prop integration

## Implementation Increments

### Increment 1: Contact Page Structure & Navigation (30 minutes)
**Objective:** Create basic Contact.tsx component with navigation integration

**Tasks:**
1. Create `frontend/src/pages/Contact.tsx` component structure
2. Update React Router configuration in main App.tsx
3. Update navigation components to include Contact link
4. Implement basic layout with Material-UI components

**Acceptance Criteria Addressed:**
- ‚úÖ Contact page accessible via footer link and navigation
- ‚úÖ Page follows site's responsive design patterns (basic layout)
- ‚úÖ Contact page integrates with existing navigation structure

**Technical Specifications:**
```typescript
// Basic component structure
interface ContactPageProps {}

const ContactPage: React.FC<ContactPageProps> = () => {
  return (
    <Container maxWidth="lg">
      <Typography variant="h1">Contact Us</Typography>
      {/* Contact info and form sections */}
    </Container>
  );
};
```

**Files Modified:**
- `frontend/src/pages/Contact.tsx` (create)
- React Router configuration (update navigation routes)

### Increment 2: Contact Information Display (20 minutes)
**Objective:** Implement contact information section with email and social media links

**Tasks:**
1. Create contact information section with Material-UI Typography and Link components
2. Display label contact details (general inquiries, artist submissions, press)
3. Add social media links section with proper external link handling
4. Implement responsive typography and spacing

**Acceptance Criteria Addressed:**
- ‚úÖ Page displays relevant contact information (email, social media links)

**Technical Specifications:**
```typescript
// Contact information data structure
interface ContactInfo {
  title: string;
  email: string;
  description?: string;
}

const contactInfoItems: ContactInfo[] = [
  {
    title: "General Inquiries",
    email: "info@alldayeverydayrecords.com",
    description: "For general questions about our label and releases"
  },
  // Additional contact items
];
```

**Files Modified:**
- `frontend/src/pages/Contact.tsx` (enhance with contact info)

### Increment 3: Contact Form Implementation (45 minutes)
**Objective:** Build contact form with Material-UI components and state management

**Tasks:**
1. Implement form state management with useState hook
2. Create form fields using Material-UI TextField components
3. Add form submission button with loading state
4. Implement basic form layout with proper spacing and responsive design

**Acceptance Criteria Addressed:**
- ‚úÖ Contact form allows users to send messages (name, email, subject, message)

**Technical Specifications:**
```typescript
// Form data interface
interface ContactFormData {
  name: string;
  email: string;
  subject: string;
  message: string;
}

// Form state management
const [formData, setFormData] = useState<ContactFormData>({
  name: '',
  email: '',
  subject: '',
  message: ''
});

const [isSubmitting, setIsSubmitting] = useState(false);
const [submitStatus, setSubmitStatus] = useState<'idle' | 'success' | 'error'>('idle');
```

**Files Modified:**
- `frontend/src/pages/Contact.tsx` (add form implementation)

### Increment 4: Form Validation & Submission (60 minutes)
**Objective:** Complete form validation, API integration, and success/error handling

**Tasks:**
1. Implement comprehensive client-side form validation
2. Create backend API endpoint for contact form submission
3. Integrate form submission with factory pattern API service
4. Add success and error state handling with user feedback
5. Implement form reset after successful submission

**Acceptance Criteria Addressed:**
- ‚úÖ Form validation prevents submission of invalid data
- ‚úÖ Success confirmation shown after successful form submission

**Technical Specifications:**
```typescript
// Form validation interface
interface FormErrors {
  name?: string;
  email?: string;
  subject?: string;
  message?: string;
}

// Validation function
const validateForm = (data: ContactFormData): FormErrors => {
  const errors: FormErrors = {};
  
  if (!data.name.trim()) errors.name = 'Name is required';
  if (!data.email.trim()) errors.email = 'Email is required';
  else if (!isValidEmail(data.email)) errors.email = 'Please enter a valid email address';
  if (!data.subject.trim()) errors.subject = 'Subject is required';
  if (!data.message.trim()) errors.message = 'Message is required';
  
  return errors;
};

// Form submission with factory pattern
const handleSubmit = async (e: React.FormEvent) => {
  e.preventDefault();
  const services = createServices();
  
  try {
    setIsSubmitting(true);
    await services.api.post('/contact-form.php', formData);
    setSubmitStatus('success');
    // Reset form
  } catch (error) {
    setSubmitStatus('error');
  } finally {
    setIsSubmitting(false);
  }
};
```

**Files Created:**
- `backend/api/contact-form.php` (new backend endpoint)

**Files Modified:**
- `frontend/src/pages/Contact.tsx` (complete validation and submission)

## API Service Strategy

### Factory Pattern Compliance:
```typescript
// ‚úÖ Correct: Use factory pattern
import { createServices } from '../services';

const ContactPage: React.FC = () => {
  const services = createServices();
  
  const handleSubmit = async (formData: ContactFormData) => {
    try {
      const response = await services.api.post('/contact-form.php', formData);
      return response.data;
    } catch (error) {
      throw new Error('Failed to submit contact form');
    }
  };
};

// ‚ùå Forbidden: Direct service imports
import { ApiService } from '../services/apiService';
const apiService = new ApiService(); // NEVER DO THIS
```

### New Backend Endpoint Required:
- ‚úÖ `/contact-form.php` - Accept POST requests with contact form data
- **Input validation**: name, email, subject, message fields
- **Email integration**: Simple mail() function or email service integration
- **Response format**: Consistent JSON with success/error status

## Architectural Directives

### ‚úÖ MANDATORY Pattern Compliance:

1. **Factory Pattern**: ALL API access through `createServices()` - NO direct service imports
2. **Component Architecture**: TypeScript interfaces for all props and form data structures  
3. **Responsive Design**: Mobile-first MUI breakpoint system with proper form layout
4. **Error Handling**: Comprehensive validation with Material-UI error states and user feedback
5. **State Management**: Local `useState` for form state, validation errors, and submission status
6. **API Integration**: Factory pattern compliant form submission with proper error boundaries

### Security Considerations:
- Input validation and sanitization on both frontend and backend
- CORS handling in backend endpoint for cross-origin requests
- Email validation to prevent injection attacks
- Rate limiting consideration for form submissions

### Performance Considerations:
- Form validation on blur for better UX
- Debounced validation for real-time feedback
- Loading states during form submission
- Form reset after successful submission

## Testing Strategy

### Manual Testing Scenarios:
1. **Navigation**: Access contact page from footer and main navigation
2. **Responsive Design**: Test form layout on mobile, tablet, and desktop breakpoints
3. **Form Validation**: Test all validation scenarios (empty fields, invalid email, etc.)
4. **Form Submission**: Test successful submission and error handling
5. **Contact Information**: Verify email links and social media links work correctly

### Integration Testing:
1. **API Integration**: Test contact form submission with backend endpoint
2. **Navigation Integration**: Verify React Router integration works correctly
3. **Design System**: Ensure Material-UI theming consistency with rest of application

## Completion Criteria

### Definition of Done:
- ‚úÖ Contact page accessible via navigation and footer
- ‚úÖ Contact information displayed clearly and responsively
- ‚úÖ Contact form functional with all required fields
- ‚úÖ Form validation prevents invalid submissions
- ‚úÖ Success/error states handled gracefully
- ‚úÖ Responsive design works across all breakpoints
- ‚úÖ Backend endpoint functional and integrated
- ‚úÖ All acceptance criteria verified
- ‚úÖ Code follows established design patterns
- ‚úÖ No console errors or warnings

### Success Metrics:
- Contact form submission success rate > 95%
- Form validation prevents 100% of invalid submissions
- Page load time < 2 seconds
- Mobile responsiveness verified across device sizes
- No accessibility issues with form elements

## Integration Points

### Frontend Integration:
- React Router: New `/contact` route configuration
- Navigation components: Footer and main navigation updates
- Material-UI theme: Consistent with existing design system
- API service layer: Factory pattern compliance for form submission

### Backend Integration:
- CORS configuration: Contact form endpoint accessible from frontend
- Email service: Simple mail delivery for form submissions
- Security: Input validation and sanitization
- Response format: Consistent with existing API endpoints

### Dependencies:
- ‚úÖ Sprint 1 navigation system (satisfied - existing nav structure)
- ‚úÖ Material-UI design system (satisfied - existing theme and components)
- ‚úÖ API service layer (satisfied - existing factory pattern implementation)

**Note**: This implementation establishes the foundation for future admin contact management features in Sprint 3/4, where administrators could configure contact information and manage form submissions through an admin interface.